---
layout: layout
---

<h1>Example</h1>

<a href="https://github.com/rkusa/pdfjs/blob/master/README.md">View API Docs</a>, <a href="#source">View Example Source</a>

<div id="progress" class="progress progress-striped active">
  <div class="progress-bar" id="progressbar"></div>
</div>

<iframe id="preview" width="100%" height="650" frameborder="0"></iframe>

<a name="source"></a>

{% highlight javascript %}
var doc = new Pdfjs(openSans)

doc.header(function() {
  this.table({ padding: 0 }, function() {
    this.tr(function() {
      this.td('pdfjs', { bold: true })
      this.td('github.com/rkusa/pdfjs', { light: true, align: 'right' })
    })
  })
})

doc.footer(function() {
  this.text(function(text) {
    this.opts.align = 'center'
    this.text('Page').pageNumber()
  })
})

doc.image(logo, { width: 128 })

doc.text(function(text) {
  text.opts.size = 14
  this.opts.lineSpacing = 1.35
  text('This is a header', { bold: true, size: 18 }).br()
  text('Content can be')('bold', { bold: true })
  text(',')('italic', { italic: true })
  text('or')('both', { italic: true, bold: true })('.')
  text('You`re also able to use')('light', { light: true })
  text(', which could be')('italic', { italic: true, light: true })(', too.').br()
  text('If you want, you can also')('mixup different fonts', { font: sourceCodePro })
  text('or different')('font', { size: 10 })('sizes', { size: 18 })('.')
})

var str = 'Lorem ipsum ...'

doc.text(new Array(4).join(str + '\n'), {
  size: 14, lineSpacing: 1.35, align: 'justify'
})

doc.table({ header: true, size: 14 }, function() {
  this.tr({ bold: true, borderWidth: { bottom: 1.5 } }, function() {
    this.td('#')
    this.td('Unit')
    this.td('Subject')
    this.td('Price')
    this.td('Total')
  })
  this.tr({ borderWidth: { horizontal: 0.1 } }, function() {
    this.td('2')
    this.td('pc.')
    this.td(function() {
      this.text('Article A', { size: 14, bold: true })
      this.text('Lorem ipsum ...', { size: 12, align: 'justify' })
    })
    this.td('500.00€', { align: 'right' })
    this.td('1,000.00€', { align: 'right' })
  })
  this.tr({ borderWidth: { horizontal: 0.1 } }, function() {
    this.td('1')
    this.td('pc.')
    this.td(function() {
      this.text('Article B', { size: 14, bold: true })
      this.text('Lorem ipsum ...', { size: 12, align: 'justify' })
    })
    this.td('250.00€', { align: 'right' })
    this.td('250.00€', { align: 'right' })
  })
  this.tr({ bold: true, align: 'right' }, function() {
    this.td('Total', { colspan: 4 })
    this.td('1,250.00€')
  })
})

document.querySelector('#preview').setAttribute('src', doc.toDataURL())
{% endhighlight %}

<script type="text/javascript">
  function load(path, callback) {
    var request = new XMLHttpRequest()
    request.open('GET', path, true)
    request.responseType = 'arraybuffer'

    if (request.overrideMimeType) {
        request.overrideMimeType('text/plain; charset=x-user-defined')
    } else {
        request.setRequestHeader('Accept-Charset', 'x-user-defined')
    }

    request.onload = function() {
      if (request.status === 200) {
        callback(null, request.response)
      } else {
        callback(request.status)
      }
    }

    request.send(null)
  }

  function build(openSans, sourceCodePro, logo) {
    var doc = new Pdfjs(openSans)

    doc.header(function() {
      this.table({ padding: 0 }, function() {
        this.tr(function() {
          this.td('pdfjs', { bold: true })
          this.td('github.com/rkusa/pdfjs', { light: true, align: 'right' })
        })
      })
    })

    doc.footer(function() {
      this.text(function(text) {
        this.opts.align = 'center'
        this.text('Page').pageNumber()
      })
    })

    doc.image(logo, { width: 128 })

    doc.text(function(text) {
      text.opts.size = 14
      this.opts.lineSpacing = 1.35
      text('This is a header', { bold: true, size: 18 }).br()
      text('Content can be')('bold', { bold: true })
      text(',')('italic', { italic: true })
      text('or')('both', { italic: true, bold: true })('.')
      text('You`re also able to use')('light', { light: true })
      text(', which could be')('italic', { italic: true, light: true })(', too.').br()
      text('If you want, you can also')('mixup different fonts', { font: sourceCodePro })
      text('or different')('font', { size: 10 })('sizes', { size: 18 })('.')
    })

    var str = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cum id fugiunt, re eadem quae Peripatetici, verba. Tenesne igitur, inquam, Hieronymus Rhodius quid dicat esse summum bonum, quo putet omnia referri oportere? Quia nec honesto quic quam honestius nec turpi turpius. Aliam vero vim voluptatis esse, aliam nihil dolendi, nisi valde pertinax fueris, concedas necesse est. Parvi enim primo ortu sic iacent, tamquam omnino sine animo sint. Duo Reges: constructio interrete. Itaque sensibus rationem adiunxit et ratione effecta sensus non reliquit.'

    doc.text(new Array(4).join(str + '\n'), {
      size: 14, lineSpacing: 1.35, align: 'justify'
    })

    doc.table({ header: true, size: 14 }, function() {
      this.tr({ bold: true, borderWidth: { bottom: 1.5 } }, function() {
        this.td('#')
        this.td('Unit')
        this.td('Subject')
        this.td('Price')
        this.td('Total')
      })
      this.tr({ borderWidth: { horizontal: 0.1 } }, function() {
        this.td('2')
        this.td('pc.')
        this.td(function() {
          this.text('Article A', { size: 14, bold: true })
          this.text('Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cum id fugiunt, re eadem quae Peripatetici, verba. Tenesne igitur, inquam, Hieronymus Rhodius quid dicat esse summum bonum, quo putet omnia referri oportere? Quia nec honesto quic quam honestius nec turpi turpius.', { size: 12, align: 'justify' })
        })
        this.td('500.00€', { align: 'right' })
        this.td('1,000.00€', { align: 'right' })
      })
      this.tr({ borderWidth: { horizontal: 0.1 } }, function() {
        this.td('1')
        this.td('pc.')
        this.td(function() {
          this.text('Article B', { size: 14, bold: true })
          this.text('Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cum id fugiunt, re eadem quae Peripatetici, verba. Tenesne igitur, inquam, Hieronymus Rhodius quid dicat esse summum bonum, quo putet omnia referri oportere? Quia nec honesto quic quam honestius nec turpi turpius.', { size: 12, align: 'justify' })
        })
        this.td('250.00€', { align: 'right' })
        this.td('250.00€', { align: 'right' })
      })
      this.tr({ bold: true, align: 'right' }, function() {
        this.td('Total', { colspan: 4 })
        this.td('1,250.00€')
      })
    })

    document.querySelector('#preview').setAttribute('src', doc.toDataURL())
  }

  var steps = 9, step = 0, progressbar = document.querySelector('#progressbar')
  function progress(task) {
    progressbar.setAttribute('style', 'width: ' + Math.round(step++ / steps * 100) + '%')
    progressbar.innerHTML = task

    if (step === steps) {
      document.querySelector('#progress').setAttribute('style', 'display:none')
    }
  }

  var openSans = {
    regular:     'fonts/open-sans/OpenSans-Regular.ttf',
    italic:      'fonts/open-sans/OpenSans-Italic.ttf',
    bold:        'fonts/open-sans/OpenSans-Bold.ttf',
    boldItalic:  'fonts/open-sans/OpenSans-BoldItalic.ttf',
    light:       'fonts/open-sans/OpenSans-Light.ttf',
    lightItalic: 'fonts/open-sans/OpenSans-LightItalic.ttf'
  }

  progress('Loading Logo')

  load('images/pdfjs.jpg', function(err, logo) {
    if (err) throw err

    var keys = Object.keys(openSans)
      , count = keys.length
    keys.forEach(function(key) {
      progress('Loading Font OpenSans')

      load(openSans[key], function(err, buffer) {
        if (err) throw err

        openSans[key] = buffer

        if (--count === 0) {
          progress('Loading Font Source Code Pro')

          load('fonts/SourceCodePro-Medium.ttf', function(err, sourceCodePro) {
            if (err) throw err

            progress('Render PDF')

            build(new Pdfjs.Font(openSans), new Pdfjs.Font(sourceCodePro), logo)

            progress('Done')
          })
        } else {
          progress('Loading Font OpenSans')
        }
      })
    })
  })
</script>